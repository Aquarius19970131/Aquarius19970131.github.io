<!DOCTYPE html>
<!--2017/07/14 Andy Song - A smart home interface for CPF web app -->
<head>

<title>Smart Home</title>
<link rel="stylesheet" type="text/css" href="./css/style.css">
<meta charset="UTF-8">

</head>
<body>
    <div class="wrap">
        <button onclick="loop()" class="btn btn-danger btn-lg">開始</button>
    </div>



<script>

	

	setup();
	
	var json = new Object();
	
	var tempValue;
	var lightValue;
	var elecValue;
	var thief;
	var COValue;
	
	var lighton = document.getElementById("lighton");
	var lightoff = document.getElementById("lightoff");
	
	// 上排數值顯示
	function loop() {
			
			// 光敏感測
			lightValue = cpf.get("a0");
			document.getElementById("lightValue").innerHTML = lightValue;
			
			// 切換光敏狀態
			if (lightValue <= 50 ) {
				lighton.addEventListener('touchstart', function(event) {
				lighton.src= './images/light_on.png';
				lightoff.src= './images/lightoff.png';
				cpf.request('["digitalWrite", 2 , 1]');
				});
			}else {
				lightoff.addEventListener('touchstart', function(event) {
				ightoff.src= './images/light_off.png';
				lighton.src= './images/lighton.png';
				cpf.request('["digitalWrite", 2 , 0]');
				});
			}

				// 設置loop間
			setTimeout("loop()", 1000);
		}
	
	loop();
	
	// 風扇
	function fan(value) {
		cpf.request('["analogWrite", 3, ' + Number(value) + ']');
	}
	
	// LED開燈
	
	// LED關燈
	
	

	// cpf setup
	function setup(){
		if(cpf)
			cpf.setPinMode('["resetPin"],["setPinMode", "analog", 0, "INPUT"],["setPinMode", "analog", 1, "INPUT"],["setPinMode", "analog", 2, "INPUT"],["setPinMode", "analog", 3, "INPUT"],["setPinMode", "digital", 2,"OUTPUT"],["setPinMode", "digital", 3,"PWM"],["setPinMode", "digital", 7,"INPUT"]');
		
	}

</script>
</body>
</html>

